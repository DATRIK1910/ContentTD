<!-- public/admin-chat.html -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Chat</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="p-4">
    <h3 className="text-lg font-bold mb-4">Hỗ trợ người dùng</h3>
    <div id="chat-box" className="h-40 overflow-y-auto border p-2 mb-2"></div>
    <input id="message-input" className="border p-2 w-full mb-2" placeholder="Nhập tin nhắn..." />
    <button id="send-btn" className="bg-green-500 text-white p-2 rounded">
        Gửi
    </button>

    <script>
        const ws = new WebSocket("ws://localhost:5000");
        const chatBox = document.getElementById("chat-box");
        const messageInput = document.getElementById("message-input");
        const sendBtn = document.getElementById("send-btn");

        ws.onopen = () => {
            console.log("Admin WebSocket connected");
            ws.send(JSON.stringify({ senderId: "admin", receiverId: "user1", content: "Admin đã sẵn sàng!" }));
        };

        ws.onmessage = (event) => {
            const data = JSON.parse(event.data);
            const p = document.createElement("p");
            p.innerHTML = `<strong>${data.senderId}: </strong> ${data.content}`;
            chatBox.appendChild(p);
            chatBox.scrollTop = chatBox.scrollHeight;
        };

        sendBtn.onclick = () => {
            const content = messageInput.value.trim();
            if (content && ws.readyState === 1) {
                ws.send(JSON.stringify({ senderId: "admin", receiverId: "user1", content }));
                messageInput.value = "";
            }
        };
    </script>
</body>

</html>